{% extends 'main.html' %}

{% block content %}
<h1 class="cart-title container">Корзина</h1>
{% comment %} <div class="display"> {% endcomment %}
  {% if cart_items %}
  
<div class="display">

  <table class="">
    <thead class="">
        <tr class="display gap-20 container">
          <th>image</th>
          <th>name</th>
          <th>price</th>
        </tr>
      </thead>
      <tbody class="">
        {% for item in cart_items %}
        <tr class="cart-card display gap-20 ">
          <td><img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" /></td>
          <td>{{ item.product.name }}</td>
          <td>${{ item.product.price|floatformat:2 }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% endif %}
    {% comment %} </div> {% endcomment %}
    <div class="cart-summary">
      <h3>Total price: ${{ total_price|floatformat:2 }}</h3>
      <form action="{% url 'create_order' %}" method="POST">
        {% csrf_token %}
        <button type="submit" class="btn-order">Proceed to Order</button>
      </form>
    </div>
    
  </div>


<div class="cart-container display-media">
  <div class="display">
    {% if cart_items %}
  <div class="align-center">
      {% for item in cart_items %}
        <a href="{% url "detail_plant" item.product.id %}">
        <div class="cart-card align-center">
          <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" />
          <h2>{{ item.product.name }}</h2>
          <div class="price">${{ item.product.price|floatformat:2 }}</div>
          <form method="post" action="" class="quantity-controls">
            {% csrf_token %}
                <input type="hidden" name="plant_id" value="{{ item.product.id }}" />
                <button type="submit" name="action" value="decrease">−</button>
                <span>{{ item.quantity }}</span>
                <button type="submit" name="action" value="increase">+</button>
              </form>
            </div>
        </a>
        {% endfor %}
      {% else %}
      <p class="empty-cart">Корзина пуста.</p>
      {% endif %}
    <div>

    </div>

<div class="container pad-top-20">
  <h2 class="green text-center-media ">You may be interested in</h2>
  <div class="display-plant1 container media-container">
    {% for plant in plants|slice:':8' %}
    <a href="{% url "detail_plant" plant.id %}">
      <div >
        <img class="card" src="{{ plant.image.url }}" alt="" />
        <p>{{ plant.name }}</p>
        <h4 class="green">${{ plant.price }}</h4>
      </div>
    </a>
    {% endfor %}
  </div>
</div>
{% endblock %}
